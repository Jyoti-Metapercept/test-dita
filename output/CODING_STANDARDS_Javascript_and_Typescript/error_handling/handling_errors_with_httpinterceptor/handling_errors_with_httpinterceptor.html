<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-us"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="copyright" content="(C) Copyright 2023"><meta name="DC.rights.owner" content="(C) Copyright 2023"><meta name="DC.Type" content="topic"><meta name="DC.Relation" scheme="URI" content="../../../CODING_STANDARDS_Javascript_and_Typescript/error_handling/handling_errors_with_httpinterceptor/heaging_3.html"><meta name="DC.Relation" scheme="URI" content="../../../CODING_STANDARDS_Javascript_and_Typescript/error_handling/handling_errors_with_httpinterceptor/part1_heaging_3.html"><meta name="DC.Relation" scheme="URI" content="../../../CODING_STANDARDS_Javascript_and_Typescript/error_handling/handling_errors_with_httpinterceptor/part2_heaging_3.html"><meta name="DC.Format" content="XHTML"><meta name="DC.Identifier" content="d3aAon"><link rel="stylesheet" type="text/css" href="../../../commonltr.css"><title>Handling Errors with HttpInterceptor</title></head><body id="d3aAon"><main role="main"><article role="article" aria-labelledby="ariaid-title1">
   <h1 class="title topictitle1" id="ariaid-title1">Handling Errors with HttpInterceptor</h1>
   <div class="body">
      <p class="p Para">HttpInterceptor provides a way to intercept HTTP requests and responses to transform or handle them before passing them along.</p>
      <table class="table expanse-column table-rulesborder"><colgroup><col style="width:90.16%"></colgroup><tbody class="tbody">
               <tr class="row">
                  <td class="entry cellrowborder" style="text-align:left;vertical-align:top;">
                     <p class="p">
                        <strong class="ph b">import { Injectable } from '@angular/core';</strong>
                     </p>
                     <p class="p">
                        <strong class="ph b">import { </strong>
                     </p>
                     <p class="p">
                        <strong class="ph b"></strong>
                        <strong class="ph b">HttpEvent</strong>
                        <strong class="ph b">, </strong>
                        <strong class="ph b">HttpRequest</strong>
                        <strong class="ph b">, </strong>
                        <strong class="ph b">HttpHandler</strong>
                        <strong class="ph b">, </strong>
                     </p>
                     <p class="p">
                        <strong class="ph b"></strong>
                        <strong class="ph b">HttpInterceptor</strong>
                        <strong class="ph b">, </strong>
                        <strong class="ph b">HttpErrorResponse</strong>
                        <strong class="ph b"></strong>
                     </p>
                     <p class="p">
                        <strong class="ph b">} from '@angular/common/http';</strong>
                     </p>
                     <p class="p">
                        <strong class="ph b">import { Observable, </strong>
                        <strong class="ph b">throwError</strong>
                        <strong class="ph b"> } from '</strong>
                        <strong class="ph b">rxjs</strong>
                        <strong class="ph b">';</strong>
                     </p>
                     <p class="p">
                        <strong class="ph b">import { retry, </strong>
                        <strong class="ph b">catchError</strong>
                        <strong class="ph b"> } from '</strong>
                        <strong class="ph b">rxjs</strong>
                        <strong class="ph b">/operators';</strong>
                     </p>
                     <p class="p">
                        <strong class="ph b">@Injectable()</strong>
                     </p>
                     <p class="p">
                        <strong class="ph b">export class </strong>
                        <strong class="ph b">ServerErrorInterceptor</strong>
                        <strong class="ph b"> implements </strong>
                        <strong class="ph b">HttpInterceptor</strong>
                        <strong class="ph b"> {</strong>
                     </p>
                     <p class="p">
                        <strong class="ph b">  intercept(request: </strong>
                        <strong class="ph b">HttpRequest</strong>
                        <strong class="ph b">&lt;any&gt;, next: </strong>
                        <strong class="ph b">HttpHandler</strong>
                        <strong class="ph b">): Observable&lt;</strong>
                        <strong class="ph b">HttpEvent</strong>
                        <strong class="ph b">&lt;any&gt;&gt; {</strong>
                     </p>
                     <p class="p">
                        <strong class="ph b">    return </strong>
                        <strong class="ph b">next.handle</strong>
                        <strong class="ph b">(request).pipe(</strong>
                     </p>
                     <p class="p">
                        <strong class="ph b">      retry(1),</strong>
                     </p>
                     <p class="p">
                        <strong class="ph b"></strong>
                        <strong class="ph b">catchError</strong>
                        <strong class="ph b">((error: </strong>
                        <strong class="ph b">HttpErrorResponse</strong>
                        <strong class="ph b">) =&gt; {</strong>
                     </p>
                     <p class="p">
                        <strong class="ph b">        if (</strong>
                        <strong class="ph b">error.status</strong>
                        <strong class="ph b"> === 401) {</strong>
                     </p>
                     <p class="p">
                        <strong class="ph b">          // refresh token</strong>
                     </p>
                     <p class="p">
                        <strong class="ph b">        } else {</strong>
                     </p>
                     <p class="p">
                        <strong class="ph b">          return </strong>
                        <strong class="ph b">throwError</strong>
                        <strong class="ph b">(error);</strong>
                     </p>
                     <p class="p">
                        <strong class="ph b">        }</strong>
                     </p>
                     <p class="p">
                        <strong class="ph b">      })</strong>
                     </p>
                     <p class="p">
                        <strong class="ph b">    );    </strong>
                     </p>
                     <p class="p">
                        <strong class="ph b">  }</strong>
                     </p>
                     <p class="p">
                        <strong class="ph b">}</strong>
                     </p>
                  </td>
               </tr>
            </tbody></table>
   </div>
<nav role="navigation" class="related-links"><ul class="ullinks"><li class="link ulchildlink"><strong><a href="../../../CODING_STANDARDS_Javascript_and_Typescript/error_handling/handling_errors_with_httpinterceptor/heaging_3.html">Heaging 3</a></strong><br></li><li class="link ulchildlink"><strong><a href="../../../CODING_STANDARDS_Javascript_and_Typescript/error_handling/handling_errors_with_httpinterceptor/part1_heaging_3.html">Part1_Heaging 3</a></strong><br></li><li class="link ulchildlink"><strong><a href="../../../CODING_STANDARDS_Javascript_and_Typescript/error_handling/handling_errors_with_httpinterceptor/part2_heaging_3.html">Part2_Heaging 3</a></strong><br></li></ul></nav></article></main></body></html>